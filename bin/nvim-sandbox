#!/bin/bash

if [ "$1" = "install" ]; then
  repo="${2?Usage: $0 install [REPO]}"
  name="${2##*/}"
  git clone "$repo" "$HOME/.local/share/nvim-sandbox/data/nvim/site/pack/$name/start/$name"
  exit 0
fi

mkdir -p ~/.local/share/nvim-sandbox/config
mkdir -p ~/.local/share/nvim-sandbox/data
mkdir -p ~/.local/share/nvim-sandbox/state
mkdir -p ~/.local/share/nvim-sandbox/run
XDG_CONFIG_HOME="$HOME/.local/share/nvim-sandbox/config" \
  XDG_DATA_HOME="$HOME/.local/share/nvim-sandbox/data" \
  XDG_STATE_HOME="$HOME/.local/share/nvim-sandbox/state" \
  XDG_RUNTIME_DIR="$HOME/.local/share/nvim-sandbox/run" \
  nvim "$@"
